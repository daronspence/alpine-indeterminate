(()=>{var y=function(_){_.directive("indeterminate",(e,{expression:a},{Alpine:x,effect:c,evaluateLater:l,cleanup:k,evaluate:m})=>{let i=m("$root");console.log(i);let o=`input[type="checkbox"][x-model="${a}"]`,g=e.hasAttribute("x-model"),p=i.querySelectorAll(o),s=()=>{let t=i.querySelectorAll(o);i.querySelectorAll(o+":checked").length<t.length?t.forEach(n=>{let r=n._x_model?.get()??[];r.includes(n.value)||r.push(n.value)}):(t[0]._x_model.set([]),e._x_model?.set(!1),x.nextTick(()=>{e.dataset.indeterminate=!1,e.dataset.checked=!1,e.indeterminate=!1,e.checked=!1}))};function A(t){let d=i.querySelectorAll(o);if(t.length===0){e.dataset.indeterminate=!1,e.dataset.checked=!1,e.indeterminate=!1,e.checked=!1;return}if(t.length===d.length){setTimeout(()=>{e.dataset.indeterminate=!1,e.dataset.checked=!0,e.indeterminate=!1,e.checked=!0,e._x_model?.set(!0)},0);return}e._x_model?.set(!1),e.dataset.indeterminate=!0,e.dataset.checked=!1,e.indeterminate=!0,e.checked=!1}let u=l(a);if(g){let t=e.getAttribute("x-model");e._x_indeterminate_previousVal=Boolean(m(t));let d=l(t);c(()=>{d(n=>{u(r=>{let h=i.querySelectorAll(o);if(n===e._x_indeterminate_previousVal){e._x_indeterminate_previousVal=n;return}if(e._x_indeterminate_previousVal=n,r.length===h.length&&!n){s();return}if(n&&h.length!==r.length){s();return}})})})}else e.addEventListener("click",s),k(()=>{e.removeEventListener("click",s)});c(()=>{console.log("updating checkboxes"),p=i.querySelectorAll(o)}),c(()=>{u(t=>{A(t)})})})},f=y;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(f)});})();
